{"componentChunkName":"component---src-templates-markdown-remark-js","path":"/data-science/cloud-price-analysis/src/CloudCostOptimizer (CCO)","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"1b22c8d9-3a72-52df-9acd-34d0dfc22d6f","html":"<h1 id=\"cloud-cost-optimizer\" style=\"position:relative;\"><a href=\"#cloud-cost-optimizer\" aria-label=\"cloud cost optimizer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cloud Cost Optimizer</h1>\n<p>The goal of the project is to provide the user an api for getting <a href=\"https://aws.amazon.com/ec2/spot/\">AWS spot instances</a> (or on-demand) best offers based on a given configuration.\nThe Optimizer first gets from the user application(s) requirements such as OS, region, cpu, memory, storage, network, etc..\nAfter calculating All the options, the Optimizer suggests the user the cheapest configuration of EC2 instances to run their app.</p>\n<h2 id=\"getting-started\" style=\"position:relative;\"><a href=\"#getting-started\" aria-label=\"getting started permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Getting Started</h2>\n<p>To start using The Cloud Cost Optimizer, please clone this git repository:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone https://github.com/AdiY10/CloudCostOptimizer.git</code></pre></div>\n<h3 id=\"prerequisites\" style=\"position:relative;\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h3>\n<ul class=\"pf-c-list\">\n<li>The Cloud Cost Optimizer requires Python3- Python 3.4 or newer installed. You can check the version by typing <code class=\"language-text\">python3 --version</code> in your command line.</li>\n<li>You can download the latest Python version from <a href=\"https://www.python.org/downloads/\">here</a>.</li>\n</ul>\n<h3 id=\"installation\" style=\"position:relative;\"><a href=\"#installation\" aria-label=\"installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ python -m pip install requests\n$ pip3 install urllib3\n$ pip3 install pandas\n$ pip install grequests</code></pre></div>\n<h3 id=\"usage\" style=\"position:relative;\"><a href=\"#usage\" aria-label=\"usage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usage</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ python Fleet_Optimizer.py</code></pre></div>\n<p>Where the following command activate the Optimizer</p>\n<h2 id=\"parameters\" style=\"position:relative;\"><a href=\"#parameters\" aria-label=\"parameters permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Parameters</h2>\n<p>The file <strong>input_fleet.json</strong> is an example of an input (see input<em>fleet</em>instructions.json for more explanations).\nThe user’s workload should be in the <strong>input_fleet.json</strong> file- <strong>don’t forget to change it according to your needs.</strong></p>\n<h4 id=\"example-of-an-input-json-file\" style=\"position:relative;\"><a href=\"#example-of-an-input-json-file\" aria-label=\"example of an input json file permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example of an input json file:</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n    &quot;selectedOs&quot;: &quot;linux&quot;,\n    &quot;region&quot;: [&quot;eu-south-1&quot;, &quot;eu-west-3&quot;, &quot;us-east-2&quot;,&quot;us-east-1&quot;],\n    &quot;spot/onDemand&quot;: &quot;spot&quot;,\n    &quot;AvailabilityZone&quot;: &quot;all&quot;,\n    &quot;Architecture&quot;: &quot;all&quot;,\n    &quot;apps&quot;: [\n        {\n            &quot;app&quot;: &quot;App1&quot;,\n            &quot;share&quot;: true,\n            &quot;components&quot;: [\n                {\n                    &quot;memory&quot;: 8,\n                    &quot;vCPUs&quot;: 4,\n                    &quot;network&quot;: 5,\n                    &quot;behavior&quot;: &quot;terminate&quot;,\n                    &quot;frequency&quot;: &quot;2&quot;,\n                    &quot;storageType&quot;: null,\n                    &quot;name&quot;: &quot;Comp1&quot;\n                },\n                {\n                    &quot;memory&quot;: 8,\n                    &quot;vCPUs&quot;: 3,\n                    &quot;network&quot;: 0,\n                    &quot;behavior&quot;: &quot;hibernate&quot;,\n                    &quot;frequency&quot;: &quot;3&quot;,\n                    &quot;storageType&quot;: null,\n                    &quot;burstable&quot;: true,\n                    &quot;name&quot;: &quot;comp2&quot;\n                },\n                                {\n                    &quot;memory&quot;: 8,\n                    &quot;vCPUs&quot;: 3,\n                    &quot;network&quot;: 0,\n                    &quot;behavior&quot;: &quot;hibernate&quot;,\n                    &quot;frequency&quot;: &quot;3&quot;,\n                    &quot;storageType&quot;: null,\n                    &quot;burstable&quot;: true,\n                    &quot;name&quot;: &quot;comp5&quot;\n                }\n            ]\n        },\n        {\n            &quot;app&quot;: &quot;App2&quot;,\n            &quot;share&quot;: false,\n            &quot;components&quot;: [\n                {\n                    &quot;memory&quot;: 10,\n                    &quot;vCPUs&quot;: 5,\n                    &quot;network&quot;: 0,\n                    &quot;behavior&quot;: &quot;stop&quot;,\n                    &quot;frequency&quot;: &quot;4&quot;,\n                    &quot;storageType&quot;: null,\n                    &quot;burstable&quot;: true,\n                    &quot;name&quot;: &quot;Comp3&quot;\n                }\n            ]\n        }\n    ]\n}</code></pre></div>\n<p>Where we can see an input of two Applications (App1, App2), which uses linux Operation System.\nApp1 includes three components (Comp1, Comp2, Comp5), and App2 includes one component (Comp3). each component\nhas different resource requirements, which describes by the memory, vCPUs etc…</p>\n<h4 id=\"required-parameters\" style=\"position:relative;\"><a href=\"#required-parameters\" aria-label=\"required parameters permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Required parameters:</h4>\n<ul class=\"pf-c-list\">\n<li>vCPUs - min number of vCPUs in the instance</li>\n<li>Memory (GB) - min memory (RAM) size in the instance</li>\n<li>OS - operating system for the instance</li>\n<li>\n<p>spot/onDemand - choose AWS instances pricing option- <strong>spot / on-Demand</strong></p>\n<h4 id=\"optional-parameters\" style=\"position:relative;\"><a href=\"#optional-parameters\" aria-label=\"optional parameters permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Optional parameters:</h4>\n</li>\n<li>\n<p>Region - used if a specific region is required, otherwise, searches in all regions.</p>\n<ul class=\"pf-c-list\">\n<li>region defined as “all”- to look for the best configuration, in all regions</li>\n<li>region defined as specific region, for example “us-east-2”- to look for the best configuration only in us-east-2</li>\n<li>region defined as list of multiple regions- [“eu-west-1”,“eu-east-2”,“sa-east-1”]- to look for the best configuration in these regions</li>\n</ul>\n</li>\n<li>AvailabilityZone - used if specific AZ is required</li>\n<li>Architecture - processor architecture, can be selected as- ‘all’ / ‘x86<em>64’ (64-bit x86) / ‘arm64’ (64-bit arm) / ‘i386’ (32-bit) / ‘x86</em>64_mac’ (64-bit mac)</li>\n<li>typeMajor - Used when specific instance types are required. For example, when only C5, R5, A1 are supported- insert “typeMajor”: [“c5”, “r5”, “a1”]</li>\n<li>Category - specifies the instance category- General Purpose, Compute Optimized, Memory Optimized, Media Accelerator Instance, Storage Optimized, GPU instance.</li>\n<li>Interruption Behavior- display only instances meeting a specific interruption behavior criteria (stop / hibernate / terminate) - in case of using Spot instances.</li>\n<li>Interruption frequency- Represents the rate at which Spot will be reclaimed capacity (0- <em>&#x3C; 5%</em>,1- <em>5-10%</em>,2- <em>10-15%</em>,3- <em>15-20%</em>, 4- <em>>20%</em>)</li>\n<li>Network - required network capacity</li>\n<li>IOPS (MiB I/O) - max IOPS per volume.</li>\n<li>Throughput (MiB/s)- max throughput per volume.</li>\n</ul>\n<h2 id=\"results\" style=\"position:relative;\"><a href=\"#results\" aria-label=\"results permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Results</h2>\n<p>The output of the Optimizer is a json file containing  a list of configurations. Each configuration represents an assignment of all application components to AWS instances.</p>\n<h3 id=\"example-of-the-api--best-result-only\" style=\"position:relative;\"><a href=\"#example-of-the-api--best-result-only\" aria-label=\"example of the api  best result only permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example of the API- Best Result Only:</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[\n    {\n        &quot;price&quot;: 0.275,\n        &quot;instances&quot;: [\n            {\n                &quot;onDemandPrice&quot;: 0.204,\n                &quot;region&quot;: &quot;us-east-2&quot;,\n                &quot;cpu&quot;: &quot;8&quot;,\n                &quot;ebsOnly&quot;: true,\n                &quot;family&quot;: &quot;General purpose&quot;,\n                &quot;memory&quot;: &quot;16&quot;,\n                &quot;network&quot;: &quot;Up to 10 Gigabit&quot;,\n                &quot;os&quot;: &quot;Linux&quot;,\n                &quot;typeMajor&quot;: &quot;a1&quot;,\n                &quot;typeMinor&quot;: &quot;2xlarge&quot;,\n                &quot;storage&quot;: &quot;EBS only&quot;,\n                &quot;typeName&quot;: &quot;a1.2xlarge&quot;,\n                &quot;discount&quot;: 81,\n                &quot;interruption_frequency&quot;: &quot;&lt;20%&quot;,\n                &quot;interruption_frequency_filter&quot;: 4.0,\n                &quot;spot_price&quot;: 0.0394,\n                &quot;Price_per_CPU&quot;: 0.004925,\n                &quot;Price_per_memory&quot;: 0.0024625,\n                &quot;components&quot;: [\n                    {\n                        &quot;appName&quot;: &quot;App2&quot;,\n                        &quot;componentName&quot;: &quot;Comp3&quot;\n                    }\n                ]\n            },\n            {\n                &quot;onDemandPrice&quot;: 0.344,\n                &quot;region&quot;: &quot;us-east-2&quot;,\n                &quot;cpu&quot;: &quot;8&quot;,\n                &quot;ebsOnly&quot;: false,\n                &quot;family&quot;: &quot;Compute optimized&quot;,\n                &quot;memory&quot;: &quot;16&quot;,\n                &quot;network&quot;: &quot;Up to 10 Gigabit&quot;,\n                &quot;os&quot;: &quot;Linux&quot;,\n                &quot;typeMajor&quot;: &quot;c5ad&quot;,\n                &quot;typeMinor&quot;: &quot;2xlarge&quot;,\n                &quot;storage&quot;: &quot;1 x 300 NVMe SSD&quot;,\n                &quot;typeName&quot;: &quot;c5ad.2xlarge&quot;,\n                &quot;discount&quot;: 78,\n                &quot;interruption_frequency&quot;: &quot;&lt;5%&quot;,\n                &quot;interruption_frequency_filter&quot;: 0.0,\n                &quot;spot_price&quot;: 0.076,\n                &quot;Price_per_CPU&quot;: 0.0095,\n                &quot;Price_per_memory&quot;: 0.00475,\n                &quot;components&quot;: [\n                    {\n                        &quot;appName&quot;: &quot;App3&quot;,\n                        &quot;componentName&quot;: &quot;Comp4&quot;\n                    }\n                ]\n            },\n            {\n                &quot;onDemandPrice&quot;: 0.6912,\n                &quot;region&quot;: &quot;us-east-2&quot;,\n                &quot;cpu&quot;: &quot;16&quot;,\n                &quot;ebsOnly&quot;: true,\n                &quot;family&quot;: &quot;Compute optimized&quot;,\n                &quot;memory&quot;: &quot;32&quot;,\n                &quot;network&quot;: &quot;25 Gigabit&quot;,\n                &quot;os&quot;: &quot;Linux&quot;,\n                &quot;typeMajor&quot;: &quot;c6gn&quot;,\n                &quot;typeMinor&quot;: &quot;4xlarge&quot;,\n                &quot;storage&quot;: &quot;EBS only&quot;,\n                &quot;typeName&quot;: &quot;c6gn.4xlarge&quot;,\n                &quot;discount&quot;: 77,\n                &quot;interruption_frequency&quot;: &quot;5%-10%&quot;,\n                &quot;interruption_frequency_filter&quot;: 1.0,\n                &quot;spot_price&quot;: 0.1596,\n                &quot;Price_per_CPU&quot;: 0.009975,\n                &quot;Price_per_memory&quot;: 0.0049875,\n                &quot;components&quot;: [\n                    {\n                        &quot;appName&quot;: &quot;App1&quot;,\n                        &quot;componentName&quot;: &quot;Comp1&quot;\n                    },\n                    {\n                        &quot;appName&quot;: &quot;App1&quot;,\n                        &quot;componentName&quot;: &quot;comp2&quot;\n                    },\n                    {\n                        &quot;appName&quot;: &quot;App1&quot;,\n                        &quot;componentName&quot;: &quot;comp5&quot;\n                    }\n                ]\n            }\n        ],\n        &quot;region&quot;: &quot;us-east-2&quot;\n    },\n    {\n        &quot;price&quot;: 0.3,\n        ...\n    }\n]</code></pre></div>","fields":{"srcLink":"https://github.com/aicoe-aiops/cloud-price-analysis-public/blob/master/src/CloudCostOptimizer (CCO)/README.md"},"frontmatter":{"title":"","description":null,"extraClasses":null,"banner":null}}},"pageContext":{"id":"1b22c8d9-3a72-52df-9acd-34d0dfc22d6f"}},"staticQueryHashes":["1764348645","2823140819","3000541721","3606484676"]}